# Tavo – إدارة ملفات الموظفين

## نظرة عامة

تطبيق mobile متكامل لإدارة ملفات الموظفين وجهات الاتصال مع مزامنة تلقائية وآمنة مع سيرفر الشركة.

## المميزات الرئيسية

### 1. المصادقة والأمان
- تسجيل دخول آمن عبر البريد الإلكتروني وكلمة المرور
- إنشاء حسابات جديدة
- إدارة الجلسات التلقائية
- صلاحيات محددة (موظف / مدير)

### 2. لوحة التحكم الرئيسية
- عرض ملخص إحصائيات المستخدم:
  - إجمالي الملفات
  - عدد جهات الاتصال
  - الإشعارات غير المقروءة
  - مساحة التخزين المستخدمة
- الملفات الأخيرة (آخر 5 ملفات)
- الإشعارات الأخيرة (آخر 5 إشعارات)

### 3. إدارة الملفات
- **إنشاء ملفات جديدة**:
  - عنوان الملف
  - وصف تفصيلي
  - نوع الملف (document, image, pdf, other)
  - رابط الملف
- **تعديل الملفات**: تحديث البيانات الأساسية
- **حذف الملفات**: حذف آمن مع تأكيد
- عرض قائمة بجميع الملفات مرتبة حسب التاريخ الأحدث

### 4. إدارة جهات الاتصال
- **إضافة جهات اتصال**:
  - الاسم الكامل (إجباري)
  - البريد الإلكتروني
  - رقم الهاتف
  - المنصب الوظيفي
  - القسم
  - ملاحظات إضافية
- **تعديل جهات الاتصال**
- **حذف جهات الاتصال**
- واجهة سهلة مع عرض معلومات شاملة

### 5. المزامنة التلقائية والنسخ الاحتياطي
- **مزامنة تلقائية كل 15 دقيقة**:
  - تحديث حالة الملفات
  - ضمان حفظ البيانات على السيرفر
- **مزامنة يدوية**: زر لمزامنة الفور عند الحاجة
- **نسخ احتياطي**: إنشاء نسخة كاملة من البيانات

### 6. الإشعارات
- إشعارات فورية عند:
  - رفع ملف جديد
  - تعديل ملف موجود
  - حذف ملف
- عرض الإشعارات مع الوقت والتفاصيل
- تتبع الإشعارات المقروءة وغير المقروءة

### 7. الإعدادات
- **معلومات الحساب**:
  - الاسم الكامل
  - البريد الإلكتروني
  - الدور (موظف / مدير)
  - القسم
  - مساحة التخزين المستخدمة
- **إعدادات المزامنة**:
  - تفعيل/تعطيل المزامنة التلقائية
  - عرض آخر وقت مزامنة
  - زر المزامنة الفورية
- **إعدادات الإشعارات**:
  - تفعيل/تعطيل الإشعارات
- **لوحة المدير** (للمديرين فقط):
  - إدارة المستخدمين
  - مراجعة سجلات النشاط
- **تسجيل الخروج الآمن**

## البنية التقنية

### التكنولوجيات المستخدمة
- **Framework**: React Native (Expo Router)
- **Database**: Supabase PostgreSQL
- **Authentication**: Supabase Auth
- **UI Components**: Lucide React Native Icons
- **State Management**: React Context API
- **Styling**: React Native StyleSheet

### البنية المشروع

```
project/
├── app/
│   ├── _layout.tsx                 # Root layout مع إدارة المسارات
│   ├── +not-found.tsx              # صفحة 404
│   ├── auth/
│   │   ├── login.tsx               # شاشة تسجيل الدخول
│   │   └── register.tsx            # شاشة التسجيل
│   └── (tabs)/
│       ├── _layout.tsx             # Tabs layout
│       ├── index.tsx               # لوحة التحكم
│       ├── files.tsx               # إدارة الملفات
│       ├── contacts.tsx            # إدارة جهات الاتصال
│       └── settings.tsx            # الإعدادات
├── contexts/
│   └── AuthContext.tsx             # Auth context والمزامنة
├── lib/
│   └── supabase.ts                 # Supabase client
├── services/
│   └── syncService.ts              # خدمة المزامنة والنسخ الاحتياطي
└── hooks/
    └── useFrameworkReady.ts        # Hook للإطار الأساسي
```

### قاعدة البيانات

#### جداول البيانات الرئيسية

1. **profiles**: بيانات المستخدم
   - id, email, full_name, role, department, storage_used

2. **files**: الملفات المرفوعة
   - id, user_id, title, description, file_type, file_url, file_size

3. **contacts**: جهات الاتصال
   - id, user_id, name, email, phone, position, department, notes

4. **notifications**: الإشعارات
   - id, user_id, title, message, type, is_read

5. **activity_logs**: سجلات النشاط
   - id, user_id, action, resource_type, resource_id, details

#### الأمان (RLS)
- تفعيل Row Level Security على جميع الجداول
- سياسات مقيدة لكل مستخدم
- صلاحيات خاصة للمديرين

## المميزات الأمنية

1. **مصادقة آمنة**:
   - كلمات مرور مشفرة
   - جلسات آمنة
   - تحديث Token تلقائي

2. **التشفير**:
   - جميع البيانات محمية برمز التشفير
   - الاتصالات عبر HTTPS

3. **Row Level Security**:
   - كل مستخدم يرى فقط بياناته الخاصة
   - الأدمن لديهم صلاحيات خاصة

4. **تتبع النشاط**:
   - تسجيل جميع العمليات
   - سجلات قابلة للتدقيق

## واجهة المستخدم

### التصميم
- **اللغة**: العربية (RTL)
- **الألوان**:
  - أزرق (#2563eb) - الأساسي
  - أخضر (#10b981) - النجاح
  - برتقالي (#f59e0b) - التحذير
  - أحمر (#ef4444) - الخطأ
  - بنفسجي (#8b5cf6) - الإدارة
- **الخطوط**: System font
- **Spacing**: نظام 8px
- **Border Radius**: 12px أو 16px

### الشاشات الأساسية

1. **شاشات المصادقة**:
   - تسجيل الدخول
   - إنشاء حساب جديد

2. **الشاشات الرئيسية (Tabs)**:
   - الرئيسية: ملخص البيانات
   - الملفات: إدارة الملفات
   - جهات الاتصال: إدارة جهات الاتصال
   - الإعدادات: إعدادات الحساب

## التثبيت والتشغيل

### المتطلبات
- Node.js (v18+)
- npm أو yarn
- Expo CLI

### خطوات التثبيت

```bash
# تثبيت المكتبات
npm install

# تشغيل التطبيق (Development)
npm run dev

# فحص الأخطاء
npm run lint

# فحص أنواع البيانات
npm run typecheck

# بناء الإصدار (Web)
npm run build:web
```

## متغيرات البيئة

تأكد من وجود ملف `.env` يحتوي على:

```
EXPO_PUBLIC_SUPABASE_URL=<your_supabase_url>
EXPO_PUBLIC_SUPABASE_ANON_KEY=<your_supabase_anon_key>
```

## الترخيص

جميع الحقوق محفوظة لشركة / المؤسسة.

## الدعم والمساعدة

للإبلاغ عن مشاكل أو طلب ميزات جديدة، يرجى التواصل مع فريق الدعم التقني.

---

**الإصدار**: 1.0.0
**آخر تحديث**: نوفمبر 2024
